:root{
    /* Theme variables (overridden by .theme-light / .theme-dark) */
    --bg:#071017;
    --bg-2:#0f1216; /* gradient midpoint */
    --panel:#0f1419;
    --text:#f1f8fb;
    --muted:#9fb0bf;
    --line:#24313a;
    --input-bg:#0b1115;
    --brand:#5eead4;
    --brand-2:#7dd3fc;
    --focus:#7dd3fc; /* default focus ring color */
    /* Semantic colors for status text/icons */
    --success:#22c55e;
    --success-strong:#16a34a;
    --danger:#ef4444;
    --danger-strong:#dc2626;
    --warning:#f59e0b;
    --warning-strong:#b45309;
    --radius:12px;
    --shadow:0 10px 28px rgba(0,0,0,.45);
    --font-size-base:15px; /* base font size, adjustable for accessibility */
}

/* Theme: Dark (default) */
html.theme-dark {
    --bg:#071017;
    --bg-2:#0f1216;
    --panel:#0f1419;
    --text:#f1f8fb;
    --muted:#9fb0bf;
    --line:#24313a;
    --input-bg:#0b1115;
    --focus:#7dd3fc; /* bright cyan ring on dark background */
    --success:#86efac;
    --success-strong:#22c55e;
    --danger:#fca5a5;
    --danger-strong:#ef4444;
    --warning:#facc15;
    --warning-strong:#f59e0b;
}

/* Theme: Light — ensure sufficient contrast (WCAG AA) */
html.theme-light {
    --bg:#f6fafc;
    --bg-2:#e9f2f8;
    --panel:#ffffff;
    --text:#0b2233;
    --muted:#334e68;
    --line:#c7d2da;
    --input-bg:#f0f5f8;
    --focus:#0b6b7f; /* dark teal ring for visibility on light */
    --success:#1f7a47;
    --success-strong:#145c36;
    --danger:#a3122f;
    --danger-strong:#7a0d23;
    --warning:#8a6400;
    --warning-strong:#6a4e00;
}

/* Font scaling (WCAG 1.4.4) */
html.fs-100 { --font-size-base: 15px }
html.fs-112 { --font-size-base: 17px }
html.fs-125 { --font-size-base: 19px }
*{box-sizing:border-box}
html,body,#root{height:100%}
body{
    margin:0;
    background:linear-gradient(180deg,var(--bg), var(--bg-2) 40%, var(--bg));
    color:var(--text);
    /* Use variable font-size so users can increase/decrease text globally */
    font: var(--font-size-base)/1.55 system-ui,Segoe UI,Roboto,Ubuntu,Arial,sans-serif; /* a11y: scalable text */
    overflow-x:hidden; /* ukryj poziomy pasek przewijania */
}

/* Visible focus outlines (WCAG 2.4.7 Focus Visible) */
button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
.btn:focus-visible,
.tab:focus-visible,
summary:focus-visible,
a:focus-visible,
[role="tab"]:focus-visible {
    outline: 3px solid var(--focus);
    outline-offset: 2px;
}

/* Hover/focus states for inputs */
.input:focus, .textarea:focus, .select:focus,
input:focus, textarea:focus, select:focus {
    border-color: color-mix(in oklab, var(--focus) 60%, var(--line));
}

/* Disabled states are visually distinct */
.btn:disabled, .btn[aria-disabled="true"] {
    opacity: .55;
    cursor: not-allowed;
}
input:disabled, select:disabled, textarea:disabled { opacity: .7 }
.container{max-width:1400px;margin:24px auto;padding:0 20px}

.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.brand{
    font-weight:700;font-size:20px;
    background:linear-gradient(90deg,var(--brand),var(--brand-2));
    -webkit-background-clip:text;background-clip:text;color:transparent;
}
.tabs{display:flex;gap:8px;margin:12px 0 16px}
.tab{padding:8px 12px;border-radius:8px;border:1px solid var(--line);background:transparent;color:var(--muted);text-decoration:none}
.tab.active{background:linear-gradient(90deg,var(--brand),var(--brand-2));color:#061014;border-color:transparent;font-weight:700}
.page-content{min-height:60vh}
.app-shell .container{padding-top:8px}

/* small helpers for modal/card dropzones */
.dropzone{padding:10px;border-radius:10px;border:1px dashed var(--line);background:var(--input-bg)}

.text-muted{color:var(--muted)}
.sep{border:0;border-top:1px solid var(--line);margin:10px 0}

.grid{display:grid;gap:12px}

.card{
    background:var(--panel);
    border:1px solid var(--line);
    border-radius:var(--radius);
    padding:12px;
    box-shadow:var(--shadow);
}
.section-title{margin:4px 0 10px}

.input,.textarea,.select{
    width:100%;padding:12px 14px;border-radius:10px;
    border:1px solid var(--line);background:var(--input-bg);color:var(--text);outline:0;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
}
.textarea{min-height:110px;font-family:ui-monospace,SFMono-Regular,Menlo,monospace}
.select{appearance:none}

.btn{
    display:inline-flex;align-items:center;gap:8px;
    padding:9px 14px;border-radius:10px;border:1px solid var(--line);
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
    color:var(--text);cursor:pointer;
    transition:background .12s ease,border-color .12s ease,transform .04s ease;
}
.btn:hover{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.08));border-color:#385163}
.btn:active{transform:scale(0.99)}
.btn.primary{background:linear-gradient(90deg,var(--brand),var(--brand-2));color:#061014;border-color:transparent;font-weight:700}
.btn.ghost{background:transparent}

.badge{display:inline-block;padding:2px 8px;border-radius:999px;background:var(--input-bg);border:1px solid var(--line);color:var(--muted);font-size:12px}
.time{color:var(--muted);font-size:12px}
.list{list-style:none;margin:0;padding:0}

/* Utility text colors for inline errors/success */
.text-danger{color:var(--danger-strong)}
.text-success{color:var(--success-strong)}
.text-warning{color:var(--warning-strong)}

.back{padding:7px 10px;border-radius:10px;border:1px solid var(--line);background:var(--input-bg);color:var(--text)}

/* --- moduł lekcji --- */
.module{border:1px solid var(--line);border-radius:12px;background:var(--panel);margin-top:10px;padding:16px}
.module-bar{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--line);padding:12px}
.module-grid{display:grid;grid-template-columns:360px 1fr;gap:18px}
.module-aside{border-right:1px solid var(--line);padding:14px;overflow-y:auto;overflow-x:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);min-width:0}
.module-content{padding:14px;overflow-y:auto;overflow-x:hidden;min-width:0}
.module-item{display:flex;align-items:center;gap:6px;margin:6px 0}
.item-actions{display:flex;gap:6px}

/* full-width mode: hide aside and expand content */
/* removed fullwidth escape — prefer enlarging the module itself so layout stays stable */
/* increase editor area in larger module */
.module textarea,
.module .textarea,
.module .monaco-editor,
.module .monaco-editor .overflow-guard{
    min-height:28vh;
    /* prefer wrapping in content area when possible */
    white-space:pre-wrap;
    word-break:break-word;
}

/* Ensure module-aside items don't cause horizontal overflow */
.module-aside .list{min-width:0}
.module-aside .module-item{
    display:flex;
    align-items:center;
    justify-content:flex-start;
    gap:8px;
    flex-wrap:wrap; /* allow actions to wrap under title */
}
.module-aside .module-item .btn{
    flex:1 1 auto;
    min-width:0;
    white-space:normal; /* allow label to wrap if needed */
    overflow:hidden;
    text-overflow:ellipsis;
}
.module-aside .item-actions{display:flex;gap:6px;flex-shrink:0;flex-wrap:wrap}
.module-aside .item-actions .btn{white-space:nowrap}

/* lesson-editor specific: two-column grid: left sidebar and main editor */
.lesson-editor-grid{display:grid;grid-template-columns:300px 1fr;gap:16px;align-items:start;min-width:0}
.lesson-sidebar{border-right:1px solid var(--line);padding:10px;background:transparent;min-width:0;max-width:320px}
.lesson-sidebar .sidebar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.lesson-sidebar .header-actions{display:flex;gap:8px}
.lesson-sidebar .blocks-list{display:grid;gap:6px;}
.lesson-sidebar .blocks-list{max-height:calc(100vh - 220px);overflow-y:auto;overflow-x:hidden;padding-right:6px}
.lesson-sidebar .block-card{padding:8px;border:1px solid var(--line);border-radius:8px;display:flex;align-items:flex-start;justify-content:space-between;gap:6px;min-width:0;background:transparent}
.lesson-sidebar .block-card.selected{background:color-mix(in oklab, var(--brand) 10%, transparent);border-color:color-mix(in oklab, var(--brand) 35%, var(--line))}
.lesson-sidebar .block-main{flex:1 1 auto;min-width:0;cursor:pointer}
.lesson-sidebar .block-title{font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:13px}
.lesson-sidebar .block-sub{font-size:12px}
.lesson-sidebar .block-controls{flex-shrink:0;display:flex;align-items:center}

.options-wrap{position:relative}
.options-btn{padding:6px 10px;border-radius:8px}
.options-menu{position:absolute;right:0;top:calc(100% + 8px);background:var(--panel);border:1px solid var(--line);padding:8px;display:flex;flex-direction:column;gap:8px;border-radius:8px;min-width:120px;z-index:50;box-shadow:var(--shadow)}

.lesson-editor-main{min-width:0;overflow-y:auto;padding-left:6px}
.editor-pane{background:transparent;min-width:0}
.editor-empty{padding:20px}

/* responsive */
@media (max-width: 900px){
    .module-grid{grid-template-columns:1fr;height:auto}
    .module-aside{border-right:0;border-bottom:1px solid var(--line)}
    .lesson-editor-grid{grid-template-columns:1fr;}
    .lesson-sidebar{border-right:0;border-bottom:1px solid var(--line);max-width:none}
    .lesson-sidebar .block-title{white-space:normal;overflow:visible}
}
